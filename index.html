<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halifax JB 803 Crew Database</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            border: 3px solid transparent;
            background-clip: padding-box;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .stat-card.documents { border-color: #e74c3c; }
        .stat-card.letters { border-color: #3498db; }
        .stat-card.photos { border-color: #2ecc71; }
        .stat-card.forms { border-color: #f39c12; }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .documents .stat-number { color: #e74c3c; }
        .letters .stat-number { color: #3498db; }
        .photos .stat-number { color: #2ecc71; }
        .forms .stat-number { color: #f39c12; }

        .controls {
            padding: 30px;
            background: white;
            border-bottom: 2px solid #ecf0f1;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid #bdc3c7;
            border-radius: 25px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.2);
        }

        .search-box::before {
            content: 'üîç';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 12px 20px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 25px;
            padding: 30px;
            background: #f8f9fa;
        }

        .document-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
            border-left: 5px solid #3498db;
            cursor: pointer;
        }

        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .document-card.letter { border-left-color: #3498db; }
        .document-card.telegram { border-left-color: #e74c3c; }
        .document-card.form { border-left-color: #f39c12; }
        .document-card.photo { border-left-color: #2ecc71; }
        .document-card.record { border-left-color: #9b59b6; }

        .card-header {
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-bottom: 1px solid #dee2e6;
        }

        .card-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .card-date {
            color: #7f8c8d;
            font-size: 0.9em;
            font-weight: 500;
        }

        .card-body {
            padding: 20px;
        }

        .card-details {
            margin-bottom: 15px;
        }

        .detail-row {
            display: flex;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .detail-label {
            font-weight: bold;
            min-width: 80px;
            color: #34495e;
        }

        .detail-value {
            color: #2c3e50;
        }

        .card-summary {
            color: #5d6d7e;
            font-style: italic;
            line-height: 1.5;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .export-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: none;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        @media (max-width: 768px) {
            .documents-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: auto;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Halifax JB 803 Crew Database</h1>
            <p>WOII Complete Archive ‚Ä¢ Sgt Hannam (1383305) ‚Ä¢ Sgt Crawford (634710) ‚Ä¢ Sgt Scarff (R.95040) ‚Ä¢ Sgt Shepherd (929961) ‚Ä¢ RAF Squadron 77 ‚Ä¢ 1 Mei 1943</p>
        </div>

        <div class="stats">
            <div class="stat-card documents">
                <div class="stat-number" id="total-count">62</div>
                <div>Totaal Documenten</div>
            </div>
            <div class="stat-card letters">
                <div class="stat-number" id="letter-count">26</div>
                <div>Brieven & Telegrammen</div>
            </div>
            <div class="stat-card photos">
                <div class="stat-number" id="photo-count">4</div>
                <div>Foto's & Memorialen</div>
            </div>
            <div class="stat-card forms">
                <div class="stat-number" id="form-count">32</div>
                <div>Offici√´le Formulieren</div>
            </div>
        </div>

        <div class="controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Zoek in documenten... (naam, datum, locatie, inhoud)">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">Alles</button>
                <button class="filter-btn" data-filter="letter">Brieven</button>
                <button class="filter-btn" data-filter="telegram">Telegrammen</button>
                <button class="filter-btn" data-filter="form">Formulieren</button>
                <button class="filter-btn" data-filter="photo">Foto's</button>
                <button class="filter-btn" data-filter="record">Records</button>
            </div>
            <button class="export-btn" id="exportBtn">üì• Export naar CSV</button>
        </div>

        <div class="documents-grid" id="documentsGrid">
            <!-- Documents worden hier gegenereerd door JavaScript -->
        </div>
    </div>

    <!-- Modal for document details -->
    <div id="documentModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Database van documenten
        const documentsData = [
            // HANNAM DOCUMENTS
            {
                id: 1,
                type: 'letter',
                title: 'Offici√´le Mededeling Overlijden',
                date: '16 februari 1948',
                from: 'A.W. Livingston',
                to: 'Mrs. Bernadette Sammarco',
                location: '2 Seville Street',
                reference: 'P.403627/43/S.14 Cas.B2.',
                summary: 'Offici√´le bevestiging dat Sergeant Leon Hannam (1383305) begraven ligt in Muiden General Cemetery, Holland. Vader werd in mei 1944 voor het eerst op de hoogte gesteld.',
                keywords: 'overlijden, begraven, muiden, holland, vader, mei 1944'
            },
            {
                id: 2,
                type: 'letter',
                title: 'Brief van Bernadette aan Sirs',
                date: '13 december 1947',
                from: 'Bernadette Sammarco',
                to: 'Sirs',
                location: '41 Theberton Street, Islington',
                summary: 'Bernadette vraagt om hulp bij het vinden van informatie over haar vriend Leon Hannam. Ze schrijft dat ze weet dat hij 20 jaar oud was en vermist wordt sinds 1 mei 1943.',
                keywords: 'bernadette, vriend, vermist, 20 jaar oud, 1 mei 1943'
            },
            {
                id: 3,
                type: 'letter',
                title: 'Air Ministry Response',
                date: '6 januari 1947',
                from: 'J.N. Stacey, Squadron Leader',
                to: 'Mrs. Bernadette Sammarco',
                reference: 'P-7/8-41A',
                summary: 'Brief waarin wordt uitgelegd dat Leon Hannam een Engelsman was in de Royal Air Force, vliegend in een Royal Air Force aircraft. De brief werd doorgestuurd naar de juiste afdeling.',
                keywords: 'royal air force, engelsman, aircraft, doorgestuurd'
            },
            // SHEPHERD DOCUMENTS
            {
                id: 53,
                type: 'form',
                title: 'Casualty Action Sheet - Shepherd',
                date: 'Meerdere data 1943-1944',
                reference: 'File 6262',
                summary: 'Casualty Action Sheet voor Sgt Shepherd (929961). Toont administratieve stappen van initial action tot post death action. Vermeldt Squadron 77 en Group 4.',
                keywords: 'casualty action sheet, shepherd, 929961, squadron 77, group 4'
            },
            {
                id: 54,
                type: 'letter',
                title: 'Burial Location Notification - Shepherd',
                date: '22 mei 1944',
                from: 'C.W. Wright, Director of Personal Services',
                to: 'B. Shepherd Esq.',
                location: '28 Belfort Place, St. Nicholas Road, Great Yarmouth, Norfolk',
                reference: 'P.403627/43/P.4.B.8',
                summary: 'Brief aan vader waarin wordt meegedeeld dat Sergeant R. Shepherd begraven ligt in General Cemetery Muiden, Holland. Graven genummerd 80-85 in rij 1.',
                keywords: 'burial notification, shepherd, muiden cemetery, graves 80-85, great yarmouth'
            },
            {
                id: 55,
                type: 'telegram',
                title: 'Service Details - Shepherd',
                date: '3 mei 1943',
                from: 'Records Gloucester',
                to: 'Air Ministry',
                summary: 'Telegram met volledige service details: Raymond Shepherd, geboren 2 augustus 1921, dienst vanaf 12 juni 1940, Air Gunner, 77 Squadron, vader in Great Yarmouth Norfolk.',
                keywords: 'service details, raymond shepherd, 2 august 1921, 12 june 1940, air gunner'
            }
        ];

        // Globale variabelen
        let filteredDocuments = [...documentsData];
        let currentFilter = 'all';

        // Document type icons
        const typeIcons = {
            'letter': '‚úâÔ∏è',
            'telegram': 'üìü',
            'form': 'üìã',
            'photo': 'üì∑',
            'record': 'üìÅ'
        };

        // Render documenten
        function renderDocuments() {
            const grid = document.getElementById('documentsGrid');
            
            if (!grid) {
                console.error('documentsGrid element not found');
                return;
            }
            
            grid.innerHTML = '';

            if (filteredDocuments.length === 0) {
                grid.innerHTML = '<p style="text-align: center; padding: 50px; color: #7f8c8d; font-size: 1.2em;">Geen documenten gevonden voor deze zoekopdracht.</p>';
                return;
            }

            filteredDocuments.forEach(function(doc) {
                const card = document.createElement('div');
                card.className = 'document-card ' + doc.type;
                card.onclick = function() { showDocumentDetails(doc); };
                
                const icon = typeIcons[doc.type] || 'üìÑ';

                card.innerHTML = 
                    '<div class="card-header">' +
                        '<div class="card-title">' + icon + ' ' + doc.title + '</div>' +
                        '<div class="card-date">' + doc.date + '</div>' +
                    '</div>' +
                    '<div class="card-body">' +
                        '<div class="card-details">' +
                            (doc.from ? '<div class="detail-row"><span class="detail-label">Van:</span><span class="detail-value">' + doc.from + '</span></div>' : '') +
                            (doc.to ? '<div class="detail-row"><span class="detail-label">Aan:</span><span class="detail-value">' + doc.to + '</span></div>' : '') +
                            (doc.location ? '<div class="detail-row"><span class="detail-label">Locatie:</span><span class="detail-value">' + doc.location + '</span></div>' : '') +
                            (doc.reference ? '<div class="detail-row"><span class="detail-label">Referentie:</span><span class="detail-value">' + doc.reference + '</span></div>' : '') +
                        '</div>' +
                        '<div class="card-summary">' + doc.summary + '</div>' +
                    '</div>';
                
                grid.appendChild(card);
            });
        }

        // Show document details in modal
        function showDocumentDetails(doc) {
            const modal = document.getElementById('documentModal');
            const content = document.getElementById('modalContent');
            
            if (!modal || !content) {
                console.error('Modal elements not found');
                return;
            }
            
            const icon = typeIcons[doc.type] || 'üìÑ';

            content.innerHTML = 
                '<h2>' + icon + ' ' + doc.title + '</h2>' +
                '<p style="color: #7f8c8d; margin-bottom: 20px;"><strong>Datum:</strong> ' + doc.date + '</p>' +
                '<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">' +
                    (doc.from ? '<p><strong>Van:</strong> ' + doc.from + '</p>' : '') +
                    (doc.to ? '<p><strong>Aan:</strong> ' + doc.to + '</p>' : '') +
                    (doc.location ? '<p><strong>Locatie:</strong> ' + doc.location + '</p>' : '') +
                    (doc.reference ? '<p><strong>Referentie:</strong> ' + doc.reference + '</p>' : '') +
                '</div>' +
                '<div style="background: #e8f6ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">' +
                    '<h3>Samenvatting:</h3>' +
                    '<p style="margin-top: 10px; line-height: 1.5;">' + doc.summary + '</p>' +
                '</div>' +
                '<div style="margin-top: 15px;">' +
                    '<p style="font-size: 0.9em; color: #7f8c8d;"><strong>Trefwoorden:</strong> ' + doc.keywords + '</p>' +
                '</div>';
            
            modal.style.display = 'block';
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('documentModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Filter documenten
        function filterDocuments(type) {
            currentFilter = type;
            if (type === 'all') {
                filteredDocuments = [...documentsData];
            } else {
                filteredDocuments = documentsData.filter(function(doc) {
                    return doc.type === type;
                });
            }
            applySearch();
            renderDocuments();
        }

        // Apply search filter
        function applySearch() {
            const searchInput = document.getElementById('searchInput');
            if (!searchInput) return;
            
            const searchTerm = searchInput.value.toLowerCase();
            if (searchTerm === '') {
                if (currentFilter === 'all') {
                    filteredDocuments = [...documentsData];
                } else {
                    filteredDocuments = documentsData.filter(function(doc) {
                        return doc.type === currentFilter;
                    });
                }
            } else {
                let baseDocuments = currentFilter === 'all' ? documentsData : documentsData.filter(function(doc) {
                    return doc.type === currentFilter;
                });
                
                filteredDocuments = baseDocuments.filter(function(doc) {
                    return doc.title.toLowerCase().indexOf(searchTerm) !== -1 ||
                           doc.summary.toLowerCase().indexOf(searchTerm) !== -1 ||
                           doc.keywords.toLowerCase().indexOf(searchTerm) !== -1 ||
                           (doc.from && doc.from.toLowerCase().indexOf(searchTerm) !== -1) ||
                           (doc.to && doc.to.toLowerCase().indexOf(searchTerm) !== -1) ||
                           (doc.location && doc.location.toLowerCase().indexOf(searchTerm) !== -1) ||
                           doc.date.toLowerCase().indexOf(searchTerm) !== -1;
                });
            }
        }

        // Export to CSV
        function exportToCSV() {
            const headers = ['ID', 'Type', 'Titel', 'Datum', 'Van', 'Aan', 'Locatie', 'Referentie', 'Samenvatting', 'Trefwoorden'];
            let csv = headers.join(',') + '\n';
            
            documentsData.forEach(function(doc) {
                const row = [
                    doc.id,
                    doc.type,
                    '"' + doc.title + '"',
                    '"' + doc.date + '"',
                    '"' + (doc.from || '') + '"',
                    '"' + (doc.to || '') + '"',
                    '"' + (doc.location || '') + '"',
                    '"' + (doc.reference || '') + '"',
                    '"' + doc.summary + '"',
                    '"' + doc.keywords + '"'
                ];
                csv += row.join(',') + '\n';
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = 'halifax_jb803_database.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing...');
            
            // Render initial documents
            renderDocuments();
            
            // Search input event
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    applySearch();
                    renderDocuments();
                });
            }

            // Filter button events
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(function(btn) {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterBtns.forEach(function(b) {
                        b.classList.remove('active');
                    });
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Filter documents
                    filterDocuments(this.getAttribute('data-filter'));
                });
            });

            // Export button event
            const exportBtn = document.getElementById('exportBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', exportToCSV);
            }

            // Close modal events
            const closeBtn = document.getElementById('closeModal');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            // Click outside modal to close
            const modal = document.getElementById('documentModal');
            if (modal) {
                window.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        closeModal();
                    }
                });
            }

            console.log('Initialization complete');
        });
    </script>
</body>
</html>